package com.cts.cart.controller;

import java.util.HashMap;

import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.client.RestTemplate;

import com.cts.cart.entity.Cart;
import com.cts.cart.entity.Item;

@RestController
@RequestMapping("/api/cart")
public class CartController {

	@PostMapping("/{user}")
	public Cart SaveCartItem(@RequestBody Cart cart, @PathVariable String user) {

		RestTemplate restTemplate = new RestTemplate();
		HashMap<String,Integer> uriVariables = new HashMap<>();
		
		int id = cart.

		uriVariables.put("id", id);

		ResponseEntity<Cart> entity = restTemplate.getForEntity(
				"http://localhost:8081/api/products/{id}", Cart.class, uriVariables);

		CurrencyConversion currencyConversion = entity.getBody();

		return new CurrencyConversion(currencyConversion.getId(), from, to, quantity,
				currencyConversion.getConversionMultiple(),
				quantity.multiply(currencyConversion.getConversionMultiple()),
				currencyConversion.getEnvironment() + " rest Template");
	}

}
